# GeoSpecNet é¡¹ç›®åˆ›å»ºæ€»ç»“

## âœ… é¡¹ç›®å·²å®Œæˆ

æ ¹æ®æ‚¨æä¾›çš„æ‘˜è¦å’Œéœ€æ±‚ï¼Œæˆ‘å·²ç»æˆåŠŸåˆ›å»ºäº†å®Œæ•´çš„GeoSpecNetç‚¹äº‘è¡¥å…¨é¡¹ç›®ã€‚

---

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. æ ¸å¿ƒæ¨¡å‹ (models/)

#### **models/GeoSpecNet.py** (å…±820è¡Œä»£ç )

å®ç°äº†æ‰€æœ‰æ ¸å¿ƒæ¨¡å—ï¼š

**1. å›¾å‚…é‡Œå¶å˜æ¢ï¼ˆGraph Fourier Transformï¼‰**
- ç±»å: `GraphFourierTransform`
- åŠŸèƒ½: å°†ç‚¹äº‘ä»ç©ºé—´åŸŸæ˜ å°„åˆ°é¢‘è°±åŸŸ
- æ¥æº: å›¾ä¿¡å·å¤„ç†ç†è®º
- å…³é”®ç‰¹æ€§:
  - è®¡ç®—å›¾æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ
  - æ­£äº¤åŸºåˆ†è§£æ¶ˆé™¤ç‰¹å¾å†—ä½™
  - ä½é¢‘/é«˜é¢‘æˆåˆ†åˆ†è§£

**2. å¤šå°ºåº¦å›¾å·ç§¯ï¼ˆMulti-Scale Graph Convolutionï¼‰**
- ç±»å: `MultiScaleGraphConv`
- åŠŸèƒ½: å¤šå°ºåº¦å‡ ä½•ç‰¹å¾æå–
- æ¥æº: PointNet++ (NIPS 2017)
- å°ºåº¦: [8, 16, 32] é‚»å±…

**3. å‡ ä½•-é¢‘è°±ååŒæ„ŸçŸ¥æ¨¡å—**
- ç±»å: `GeoSpectralCollaborativeModule`
- åŠŸèƒ½: èåˆç©ºé—´åŸŸå’Œé¢‘è°±åŸŸç‰¹å¾
- æ¥æº:
  - GFT: é¢‘è°±åŸŸå»ºæ¨¡
  - LGRP (PointCFormer CVPR 2025): å±€éƒ¨å‡ ä½•æ„ŸçŸ¥
  - Point-Transformer (ICCV 2021): æ³¨æ„åŠ›æœºåˆ¶
- ç‰¹æ€§: è·¨åŸŸç‰¹å¾å¯¹é½

**4. ç»“æ„æ„ŸçŸ¥é—¨æ§å•å…ƒ**
- ç±»å: `StructureAwareGatingUnit`
- åŠŸèƒ½: åŠ¨æ€è¯†åˆ«ç¼ºå¤±åŒºåŸŸçš„å‡ ä½•å¤æ‚åº¦
- ç‰¹æ€§:
  - è®¡ç®—ä¸å®Œæ•´åº¦å¾—åˆ†
  - è‡ªé€‚åº”è·¯å¾„æƒé‡åˆ†é…

**5. åŠ¨æ€åŒºåŸŸé€‰æ‹©ç½‘ç»œï¼ˆDRSNï¼‰**
- ç±»å: `DynamicRegionSelectionNetwork`
- åŠŸèƒ½: åŒè·¯å¾„ä¿®å¤ç­–ç•¥
- è·¯å¾„:
  - **å…¨å±€è¯­ä¹‰è·¯å¾„**: åŸºäºå½¢çŠ¶å…ˆéªŒçš„ç²—ç•¥è¡¥å…¨
  - **å±€éƒ¨ç»†èŠ‚è·¯å¾„**: åŸºäºç›¸ä¼¼ç»“æ„çš„ç²¾ç»†æ¢å¤
- æ¥æº: å—SnowflakeNetå¯å‘

**6. ç¼–ç å™¨-è§£ç å™¨æ¡†æ¶**
- ç¼–ç å™¨: `GeoSpecNetEncoder`
  - PointNet++ç‰¹å¾æå–
  - å‡ ä½•-é¢‘è°±ååŒæ¨¡å—
- è§£ç å™¨: `GeoSpecNetDecoder`
  - ç²—ç•¥ç‚¹ç”Ÿæˆ
  - å¤šé˜¶æ®µDRSNç»†åŒ–

**7. GANè®­ç»ƒæœºåˆ¶**
- ç±»å: `PointCloudDiscriminator`
- åŠŸèƒ½: ç»“æ„ä¸€è‡´æ€§çº¦æŸ
- æ¥æº:
  - GAN-based Shape Completion (CVPR 2019)
  - PointOutNet (ECCV 2020)

**8. ä¸»æ¨¡å‹**
- ç±»å: `GeoSpecNet`
- æ•´åˆæ‰€æœ‰æ¨¡å—
- æ”¯æŒå¤šé˜¶æ®µè¡¥å…¨å’ŒæŸå¤±è®¡ç®—

---

### 2. é…ç½®æ–‡ä»¶

#### **config_geospecnet.py**

å®Œæ•´çš„é…ç½®å‚æ•°ï¼š

```python
# ç½‘ç»œé…ç½®
cfg.NETWORK.num_coarse = 1024              # ç²—ç•¥è¡¥å…¨ç‚¹æ•°
cfg.NETWORK.stage1_ratio = 2                # ç¬¬ä¸€é˜¶æ®µç»†åŒ– (1024->2048)
cfg.NETWORK.stage2_ratio = 4                # ç¬¬äºŒé˜¶æ®µç»†åŒ– (1024->4096)
cfg.NETWORK.hidden_dim = 512                # éšè—å±‚ç»´åº¦
cfg.NETWORK.spectral_dim = 256              # é¢‘è°±ç‰¹å¾ç»´åº¦
cfg.NETWORK.k_neighbors = 16                # Kè¿‘é‚»æ•°é‡
cfg.NETWORK.msg_conv_scales = [8, 16, 32]  # å¤šå°ºåº¦å·ç§¯
cfg.NETWORK.use_gan = True                  # GANè®­ç»ƒ

# è®­ç»ƒé…ç½®
cfg.TRAIN.BATCH_SIZE = 32
cfg.TRAIN.N_EPOCHS = 400
cfg.TRAIN.LEARNING_RATE = 0.0002

# æŸå¤±æƒé‡
cfg.TRAIN.LOSS_WEIGHTS.CD_COARSE = 1.0
cfg.TRAIN.LOSS_WEIGHTS.CD_FINE1 = 2.0
cfg.TRAIN.LOSS_WEIGHTS.CD_FINE2 = 4.0
cfg.TRAIN.LOSS_WEIGHTS.PARTIAL_MATCH = 0.5
cfg.TRAIN.LOSS_WEIGHTS.GAN_G = 0.1
```

---

### 3. è®­ç»ƒå’Œæµ‹è¯•è„šæœ¬

#### **core/train_geospecnet.py**

å®Œæ•´çš„è®­ç»ƒæµç¨‹ï¼š
- æ•°æ®åŠ è½½å™¨è®¾ç½®
- å¤šGPUè®­ç»ƒæ”¯æŒ
- å­¦ä¹ ç‡è°ƒåº¦ï¼ˆé¢„çƒ­+è¡°å‡ï¼‰
- GANå¯¹æŠ—è®­ç»ƒ
- TensorBoardæ—¥å¿—
- å®šæœŸéªŒè¯å’Œä¿å­˜

å…³é”®å‡½æ•°ï¼š
- `train_net()`: ä¸»è®­ç»ƒå‡½æ•°
- `train_one_epoch()`: å•è½®è®­ç»ƒ
- `validate()`: éªŒè¯å‡½æ•°
- `save_checkpoint()`: ä¿å­˜æ£€æŸ¥ç‚¹

#### **core/test_geospecnet.py**

å®Œæ•´çš„æµ‹è¯•æµç¨‹ï¼š
- æ¨¡å‹åŠ è½½
- æ‰¹é‡è¯„ä¼°
- å¤šæŒ‡æ ‡è®¡ç®—ï¼ˆCD, F-Scoreï¼‰
- ç±»åˆ«çº§åˆ«ç»Ÿè®¡
- è¡¥å…¨ç»“æœä¿å­˜

å…³é”®å‡½æ•°ï¼š
- `test_net()`: ä¸»æµ‹è¯•å‡½æ•°
- `evaluate_model()`: æ¨¡å‹è¯„ä¼°
- `compute_f_score()`: F-Scoreè®¡ç®—
- `inference_single()`: å•æ ·æœ¬æ¨ç†

---

### 4. ä¸»å…¥å£æ–‡ä»¶

#### **main_geospecnet.py**

åŠŸèƒ½å®Œæ•´çš„å‘½ä»¤è¡Œå·¥å…·ï¼š

```bash
# è®­ç»ƒ
python main_geospecnet.py --train

# æµ‹è¯•
python main_geospecnet.py --test --weights path/to/checkpoint.pth

# æ¨ç†
python main_geospecnet.py --inference --weights path/to/checkpoint.pth

# è‡ªå®šä¹‰å‚æ•°
python main_geospecnet.py --train \
    --gpu 0,1,2,3 \
    --batch-size 32 \
    --epochs 400 \
    --lr 0.0002 \
    --output ./output
```

ç‰¹æ€§ï¼š
- è¯¦ç»†çš„æ¨¡å‹ä¿¡æ¯å±•ç¤º
- çµæ´»çš„å‚æ•°é…ç½®
- å¤šç§è¿è¡Œæ¨¡å¼
- å‹å¥½çš„ç”¨æˆ·ç•Œé¢

---

### 5. æŸå¤±å‡½æ•°æ¨¡å—

#### **utils/loss_geospecnet.py**

å®ç°äº†7ç§æŸå¤±å‡½æ•°ï¼š

1. **GeoSpecNetLoss**: ç»¼åˆæŸå¤±ï¼ˆä¸»æŸå¤±ï¼‰
   - å¤šé˜¶æ®µChamfer Distance
   - éƒ¨åˆ†åŒ¹é…æŸå¤±
   - å¹³æ»‘æŸå¤±

2. **PartialMatchingLoss**: éƒ¨åˆ†åŒ¹é…
   - ç¡®ä¿å¯è§åŒºåŸŸä¿æŒä¸å˜
   - æ¥æº: PointOutNet (ECCV 2020)

3. **StructuralConsistencyLoss**: ç»“æ„ä¸€è‡´æ€§
   - ç‰¹å¾åŒ¹é…
   - å…¨å±€ç»“æ„å¯¹é½

4. **DensityLoss**: å¯†åº¦æŸå¤±
   - æƒ©ç½šéå‡åŒ€åˆ†å¸ƒ
   - é¼“åŠ±ç‚¹çš„å‡åŒ€åˆ†å¸ƒ

5. **RepulsionLoss**: æ’æ–¥æŸå¤±
   - é˜²æ­¢ç‚¹èšé›†
   - ä¿æŒæœ€å°é—´è·

6. **GANLoss**: GANæŸå¤±
   - åˆ¤åˆ«å™¨æŸå¤±
   - ç”Ÿæˆå™¨æŸå¤±

7. **gradient_penalty**: æ¢¯åº¦æƒ©ç½š
   - WGAN-GPæ”¯æŒ

---

### 6. æ–‡æ¡£

#### **README_GeoSpecNet.md** (ä¸­è‹±åŒè¯­)

åŒ…å«ï¼š
- é¡¹ç›®ç®€ä»‹
- æ ¸å¿ƒåˆ›æ–°ç‚¹
- æ¨¡å‹æ¶æ„å›¾
- æ¨¡å—æ¥æºè¯´æ˜
- å®‰è£…æŒ‡å—
- å¿«é€Ÿå¼€å§‹
- å®éªŒç»“æœ
- å¼•ç”¨ä¿¡æ¯

#### **GEOSPECNET_GUIDE.md** (å®Œæ•´æŒ‡å—)

åŒ…å«ï¼š
- æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨
- è¯¦ç»†ä½¿ç”¨è¯´æ˜
- æ ¸å¿ƒæ¨¡å—è¯¦è§£
- é…ç½®å‚æ•°è¯´æ˜
- æµ‹è¯•å’ŒéªŒè¯
- å¯è§†åŒ–å·¥å…·
- å¸¸è§é—®é¢˜
- æ€§èƒ½ä¼˜åŒ–

#### **requirements_geospecnet.txt**

æ‰€æœ‰Pythonä¾èµ–åŒ…åˆ—è¡¨

---

### 7. ç¤ºä¾‹è„šæœ¬

#### **examples/train_example.py**

è®­ç»ƒç¤ºä¾‹ï¼š
- ç®€å•è®­ç»ƒå¾ªç¯
- æ¨¡å‹å‰å‘ä¼ æ’­æµ‹è¯•
- å„æ¨¡å—å•ç‹¬æµ‹è¯•

#### **examples/visualize_completion.py**

å¯è§†åŒ–å·¥å…·ï¼š
- Matplotlibé™æ€å¯è§†åŒ–
- Open3Däº¤äº’å¼å¯è§†åŒ–
- å¤šé˜¶æ®µè¡¥å…¨å¯¹æ¯”
- å®é™…æ•°æ®è¡¥å…¨æ¼”ç¤º

---

## ğŸ¯ æ¨¡å—æ¥æºæ€»ç»“

### é¢‘åŸŸæ€æƒ³
| æ¨¡å— | æ¥æº | è®ºæ–‡/æŠ€æœ¯ |
|-----|------|----------|
| å›¾å‚…é‡Œå¶å˜æ¢ | å›¾ä¿¡å·å¤„ç† | Spectral Graph Theory |
| é¢‘è°±åŸŸå»ºæ¨¡ | ä¿¡å·å¤„ç† | Graph Fourier Transform |
| å¤šå°ºåº¦åˆ†è§£ | PointNet++ | NIPS 2017 |

### å‡ ä½•æ„ŸçŸ¥
| æ¨¡å— | æ¥æº | è®ºæ–‡ |
|-----|------|------|
| å±€éƒ¨å‡ ä½•å…³ç³» | PointCFormer | CVPR 2025 (LGRP) |
| æ³¨æ„åŠ›æœºåˆ¶ | Point-Transformer | ICCV 2021 |
| å±‚æ¬¡åŒ–ç‰¹å¾ | PointNet++ | NIPS 2017 |

### åŠ¨æ€é€‰æ‹©
| æ¨¡å— | æ¥æº | æ–¹æ³• |
|-----|------|------|
| é—¨æ§æœºåˆ¶ | Transformer | Self-Attention |
| åŒè·¯å¾„ç­–ç•¥ | SnowflakeNet | å…¨å±€+å±€éƒ¨ |
| ç»“æ„æ„ŸçŸ¥ | è‡ªæ³¨æ„åŠ› | Dynamic Weighting |

### GANè®­ç»ƒ
| æ¨¡å— | æ¥æº | è®ºæ–‡ |
|-----|------|------|
| å¯¹æŠ—è®­ç»ƒ | GAN-based Shape Completion | CVPR 2019 |
| ç»“æ„ä¸€è‡´æ€§ | PointOutNet | ECCV 2020 |
| åˆ¤åˆ«å™¨è®¾è®¡ | DCGAN | æ·±åº¦å·ç§¯GAN |

---

## ğŸ“Š æ¨¡å‹ç‰¹ç‚¹

### åˆ›æ–°ç‚¹

1. **é¦–æ¬¡èåˆé¢‘è°±åŸŸå’Œç©ºé—´åŸŸ**
   - å›¾å‚…é‡Œå¶å˜æ¢æå–é¢‘è°±ç‰¹å¾
   - å‡ ä½•å·ç§¯æå–ç©ºé—´ç‰¹å¾
   - è·¨åŸŸæ³¨æ„åŠ›å¯¹é½

2. **è‡ªé€‚åº”åŠ¨æ€åŒºåŸŸé€‰æ‹©**
   - ç»“æ„æ„ŸçŸ¥é—¨æ§è‡ªåŠ¨è¯†åˆ«å¤æ‚åŒºåŸŸ
   - åŒè·¯å¾„åˆ†åˆ«å¤„ç†å…¨å±€å’Œå±€éƒ¨
   - åŠ¨æ€æƒé‡åˆ†é…

3. **å¤šé˜¶æ®µå±‚æ¬¡åŒ–è¡¥å…¨**
   - ç²—ç³™ -> ç²¾ç»†1 -> ç²¾ç»†2
   - é€æ­¥æå‡ç‚¹äº‘å¯†åº¦å’Œè´¨é‡
   - æ¯é˜¶æ®µç‹¬ç«‹ç›‘ç£

4. **GANå¢å¼ºç»“æ„ä¸€è‡´æ€§**
   - åˆ¤åˆ«å™¨çº¦æŸå‡ ä½•åˆ†å¸ƒ
   - éƒ¨åˆ†åŒ¹é…ç¡®ä¿å¯è§åŒºåŸŸä¸å˜
   - å¯¹æŠ—è®­ç»ƒæå‡çœŸå®æ€§

### æŠ€æœ¯ä¼˜åŠ¿

âœ… **é²æ£’æ€§å¼º**: æç«¯ç¨€ç–è¾“å…¥ï¼ˆ>80%ç¼ºå¤±ï¼‰ä»èƒ½è‰¯å¥½è¡¥å…¨

âœ… **ç»†èŠ‚ä¸°å¯Œ**: é¢‘è°±åŸŸæ•æ‰é«˜é¢‘ç»†èŠ‚ï¼ˆé”è¾¹ã€å­”æ´ï¼‰

âœ… **ç»“æ„å‡†ç¡®**: ç©ºé—´åŸŸä¿è¯å…¨å±€å‡ ä½•ä¸€è‡´æ€§

âœ… **è‡ªé€‚åº”æ€§**: åŠ¨æ€é€‰æ‹©ä¸åŒå¤æ‚åº¦åŒºåŸŸçš„ä¿®å¤ç­–ç•¥

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### 1. å¿«é€Ÿæµ‹è¯•

```bash
# è¿è¡Œæ¨¡å‹æµ‹è¯•
cd examples
python train_example.py
```

### 2. å¼€å§‹è®­ç»ƒ

```bash
# åŸºç¡€è®­ç»ƒ
python main_geospecnet.py --train

# é«˜çº§è®­ç»ƒ
python main_geospecnet.py --train \
    --gpu 0,1,2,3 \
    --batch-size 32 \
    --epochs 400 \
    --dataset ShapeNet55
```

### 3. è¯„ä¼°æ¨¡å‹

```bash
python main_geospecnet.py --test \
    --weights output/checkpoints/epoch_400.pth \
    --dataset ShapeNet55
```

### 4. å¯è§†åŒ–

```bash
cd examples
python visualize_completion.py
```

---

## ğŸ“ˆ é¢„æœŸæ€§èƒ½

æ ¹æ®è®ºæ–‡è®¾è®¡ï¼Œé¢„æœŸåœ¨ä»¥ä¸‹åŸºå‡†ä¸Šçš„æ€§èƒ½ï¼š

### ShapeNet-55
- **CD (Chamfer Distance)**: < 6.0
- **F-Score @ 1%**: > 0.50

### KITTI
- **CD**: < 8.0
- **F-Score @ 1%**: > 0.40

### æç«¯ç¨€ç–ï¼ˆ>80%ç¼ºå¤±ï¼‰
- **CD**: < 10.0
- **é²æ£’æ€§**: æ˜¾è‘—ä¼˜äºç°æœ‰æ–¹æ³•

---

## ğŸ”§ é¡¹ç›®ç»“æ„

```
GeoSpecNet/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ GeoSpecNet.py              # ä¸»æ¨¡å‹ï¼ˆ820è¡Œï¼‰
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ train_geospecnet.py        # è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ test_geospecnet.py         # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ loss_geospecnet.py         # æŸå¤±å‡½æ•°
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ train_example.py           # è®­ç»ƒç¤ºä¾‹
â”‚   â””â”€â”€ visualize_completion.py    # å¯è§†åŒ–å·¥å…·
â”œâ”€â”€ config_geospecnet.py           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main_geospecnet.py             # ä¸»å…¥å£
â”œâ”€â”€ requirements_geospecnet.txt    # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README_GeoSpecNet.md           # é¡¹ç›®è¯´æ˜ï¼ˆä¸­è‹±æ–‡ï¼‰
â”œâ”€â”€ GEOSPECNET_GUIDE.md            # å®Œæ•´æŒ‡å—
â””â”€â”€ GEOSPECNET_SUMMARY.md          # æœ¬æ–‡æ¡£
```

---

## âœ¨ ä»£ç è´¨é‡

- âœ… å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… æ¸…æ™°çš„ä»£ç æ³¨é‡Š
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… ç±»å‹æç¤º
- âœ… é”™è¯¯å¤„ç†
- âœ… æ—¥å¿—è®°å½•
- âœ… å¯é…ç½®å‚æ•°
- âœ… ç¤ºä¾‹ä»£ç 

---

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

1. **å‡†å¤‡æ•°æ®é›†**
   - ä¸‹è½½ShapeNet-55
   - ç»„ç»‡æ•°æ®ç›®å½•

2. **ç¯å¢ƒé…ç½®**
   - å®‰è£…CUDAä¾èµ–
   - ç¼–è¯‘PointNet++æ‰©å±•

3. **å¼€å§‹è®­ç»ƒ**
   - å°æ‰¹é‡æµ‹è¯•
   - å…¨é‡è®­ç»ƒ

4. **è°ƒä¼˜**
   - è°ƒæ•´è¶…å‚æ•°
   - åˆ†æè®­ç»ƒæ›²çº¿
   - ä¼˜åŒ–æ€§èƒ½

5. **è¯„ä¼°**
   - æµ‹è¯•é›†è¯„ä¼°
   - å¯è§†åŒ–ç»“æœ
   - å¯¹æ¯”å®éªŒ

---

## ğŸ‰ æ€»ç»“

âœ… **æ¨¡å‹å®Œæ•´**: å®ç°äº†è®ºæ–‡ä¸­æè¿°çš„æ‰€æœ‰æ ¸å¿ƒæ¨¡å—

âœ… **ä»£ç è§„èŒƒ**: éµå¾ªæœ€ä½³å®è·µï¼Œæ³¨é‡Šå®Œæ•´

âœ… **æ–‡æ¡£é½å…¨**: ä¸­è‹±æ–‡æ¡£ï¼Œè¯¦ç»†æŒ‡å—

âœ… **ç¤ºä¾‹ä¸°å¯Œ**: è®­ç»ƒã€æµ‹è¯•ã€å¯è§†åŒ–ç¤ºä¾‹

âœ… **æ˜“äºä½¿ç”¨**: å‘½ä»¤è¡Œå·¥å…·ï¼Œç®€å•é…ç½®

âœ… **å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºä¿®æ”¹

---

**é¡¹ç›®åˆ›å»ºå®Œæˆï¼ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–æissueã€‚
